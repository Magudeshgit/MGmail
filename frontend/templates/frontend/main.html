{%load static%}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MGmail||User</title>
    <link rel="stylesheet" href="{%static 'css/base.css'%}">
    <link rel="stylesheet" href="{%static 'css/main.css'%}">
    <link rel="shortcut icon" href="{%static 'images/favicon.ico'%}" type="image/x-icon">
</head>
<body>
    <div class="parent">
        <div class="logo">
            <img src="{%static 'images/logo.svg'%}" alt="logo">
        </div>
        <div class="usergreet">
            <p>Hey {{request.user}}!</p>
        </div>
        <div class="tokenbox">
            <p class="abs">Auth token:</p>
            <p class="token">Token {{token}}</p>
            <img src="{% static 'images/copy.svg'%}" alt="copy" class="copy">
        </div>
        <div class="reportbox">
            <p>Report:</p>
            <ul>
                <li class="url">API url: https://mgmail.pythonanywhere.com/api/ <img src="{% static 'images/copy.svg'%}" alt="copy" class="copy2"></li>    
                <li>Username: {{request.user}}</li>
                <li>Email: {{request.user.email}}</li>
                <li>Joined on: {{mailstat.creation_date}}</li>
                <li>No of Emails sent: {{mailstat.count}}</li>
                <li>Last activity on: {{mailstat.last_activity}}</li>
            </ul>
        </div>
        <div class="toast">
            <p>Copied to Clipboard!</p>
        </div>
    </div>
    <script>
        let img = document.querySelector('.copy')
        let copy2 = document.querySelector('.copy2')
        let url = "https://mgmail.pythonanywhere.com/api/"
        let tokentext = document.querySelector('.token').innerHTML
        let toast = document.querySelector('.toast')

        img.addEventListener('click',()=>{
            navigator.clipboard.writeText(tokentext)
            toast.style.right="10px"
            setTimeout(toastfunc,2000)
        })
        copy2.addEventListener('click',()=>{
            navigator.clipboard.writeText(url)
            toast.style.right="10px"
            setTimeout(toastfunc,2000)
        })
        function toastfunc()
        {
            toast.style.right="-300px"
        }
        
    </script>
</body>
</html>